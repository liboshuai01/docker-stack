# ä¸ªäºº Docker åº”ç”¨éƒ¨ç½²æ–¹æ¡ˆé›†åˆ

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸ªäººä½¿ç”¨çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²æ¸…å•é›†åˆï¼Œä¸»è¦åŒ…å«äº†å„ç§å¸¸ç”¨æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç›‘æ§å·¥å…·ã€Web åº”ç”¨ã€å¼€å‘å·¥å…·ç­‰ï¼‰çš„ Docker Compose é…ç½®æ–‡ä»¶ã€‚æ—¨åœ¨æä¾›ä¸€ä¸ªä¾¿æ·ã€å¿«é€Ÿçš„æ–¹å¼æ¥éƒ¨ç½²è¿™äº›æœåŠ¡ï¼Œé¿å…é‡å¤é…ç½®å·¥ä½œã€‚

æœ¬é¡¹ç›®å°±åƒä¸€ä¸ªâ€œDocker éƒ¨ç½²èœè°±â€ï¼Œæ¯ç§æœåŠ¡éƒ½æ˜¯ä¸€é“â€œèœâ€ï¼Œæ‚¨å¯ä»¥åœ¨ç›¸åº”çš„ç›®å½•ä¸­æ‰¾åˆ°åˆ¶ä½œï¼ˆéƒ¨ç½²ï¼‰è¿™é“â€œèœâ€æ‰€éœ€çš„é…æ–¹ï¼ˆ`docker-compose.yaml` å’Œ `.env` æ–‡ä»¶ï¼‰ã€‚

## ç‰¹ç‚¹

*   **ä¸€ç«™å¼é›†åˆ:** æ”¶å½•äº†ä½œè€…å¸¸ç”¨çš„å¤šç§æœåŠ¡çš„ Docker Compose é…ç½®ï¼ŒæŒç»­æ›´æ–°ã€‚
*   **å¿«é€Ÿå¯åŠ¨:** æ¯ä¸ªæœåŠ¡é€šå¸¸åŒ…å« `docker-compose.yaml` å’Œ `.env` æ–‡ä»¶ï¼Œæ˜“äºç†è§£å’Œå¿«é€Ÿä¸Šæ‰‹éƒ¨ç½²ã€‚
*   **æ¨¡å—åŒ–:** æ¯ä¸ªæœåŠ¡é…ç½®ç‹¬ç«‹å­˜æ”¾äºè‡ªå·±çš„ç›®å½•ä¸­ï¼Œäº’ä¸å¹²æ‰°ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ã€ç®¡ç†å’Œé€‰æ‹©æ€§éƒ¨ç½²ã€‚
*   **å¯å®šåˆ¶:** é€šè¿‡ä¿®æ”¹ `.env` æ–‡ä»¶æˆ– `docker-compose.yaml` æ–‡ä»¶ï¼Œå¯ä»¥è½»æ¾å®Œæˆé…ç½®ï¼Œå¦‚ç«¯å£æ˜ å°„ã€æ•°æ®å·è·¯å¾„ã€ç¯å¢ƒå˜é‡ç­‰ã€‚

## ç¯å¢ƒè¦æ±‚

åœ¨ä½¿ç”¨æœ¬é¡¹ç›®ä¸­çš„é…ç½®ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²ç»å®‰è£…äº†ä»¥ä¸‹è½¯ä»¶ï¼š

*   **Docker:** å®¹å™¨è¿è¡Œæ—¶ã€‚
*   **Docker Compose:** ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨çš„å·¥å…·ã€‚
*   **è®¾ç½®HOST_IPç¯å¢ƒå˜é‡**ï¼šæ¨èåœ¨`~/.bashrc`ä¸­æ·»åŠ `export HOST_IP=ä½ çš„å®é™…å®¿ä¸»æœºIP`ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚

> æ¨èå®‰è£…æ•™ç¨‹: [CentOSç³»ç»ŸæŒ‡å®šç‰ˆæœ¬Dockerä¸Docker Composeåœ¨çº¿å®‰è£…æ•™ç¨‹](https://lbs.wiki/pages/987e17e9/)

## å¦‚ä½•ä½¿ç”¨ (éƒ¨ç½²ä¸€ä¸ªæœåŠ¡)

è¦éƒ¨ç½²æŸä¸ªæœåŠ¡ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1.  **å…‹éš†æœ¬é¡¹ç›®** (å¦‚æœå°šæœªå…‹éš†):
    ```bash
    git clone <repository_url>
    cd docker-stack
    ```
    *è¯·å°† `<repository_url>` æ›¿æ¢ä¸ºæ‚¨çš„å®é™…ä»“åº“åœ°å€ã€‚*

2.  **è¿›å…¥æ‚¨æƒ³è¦éƒ¨ç½²çš„æœåŠ¡ç›®å½•**:
    ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³éƒ¨ç½² MySQLï¼Œè¯·è¿›å…¥ `mysql/mysql-standalone` ç›®å½•ï¼š
    ```bash
    cd mysql/mysql-standalone
    ```

3.  **é…ç½®æœåŠ¡**:
    *   **åŠ¡å¿…**æ£€æŸ¥å¹¶æ ¹æ®æ‚¨çš„å®é™…éœ€æ±‚ä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„ `.env.example` æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¿®æ”¹æœåŠ¡æš´éœ²çš„ç«¯å£ã€è®¾ç½®æ•°æ®åº“çš„ root å¯†ç æˆ–æ›´æ”¹æ•°æ®å­˜å‚¨è·¯å¾„ã€‚
    *   ä»”ç»†é˜…è¯»è¯¥ç›®å½•ä¸‹çš„ `README.md` æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼Œå®ƒå¯èƒ½åŒ…å«é‡è¦çš„é…ç½®è¯´æ˜å’Œä½¿ç”¨ç»†èŠ‚ã€‚
    *   å¦‚æœéœ€è¦æ›´é«˜çº§çš„å®šåˆ¶ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘ `docker-compose.yaml` æ–‡ä»¶ã€‚

4.  **å¯åŠ¨æœåŠ¡**:
    åœ¨æœåŠ¡ç›®å½•ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ Docker Compose å¯åŠ¨æœåŠ¡ï¼š
    ```bash
    docker compose up -d
    ```
    * `-d` å‚æ•°è¡¨ç¤ºåœ¨åå°è¿è¡Œå®¹å™¨ã€‚*

5.  **æŸ¥çœ‹æœåŠ¡çŠ¶æ€**:
    æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æœåŠ¡æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼š
    ```bash
    docker compose ps
    ```

6.  **è®¿é—®æœåŠ¡**:
    æ ¹æ®æ‚¨åœ¨ `.env` æˆ– `docker-compose.yaml` ä¸­é…ç½®çš„ç«¯å£ï¼Œé€šè¿‡æµè§ˆå™¨æˆ–ç›¸åº”çš„å®¢æˆ·ç«¯è®¿é—®æœåŠ¡ã€‚å…·ä½“è®¿é—®æ–¹å¼é€šå¸¸ä¼šåœ¨è¯¥æœåŠ¡ç›®å½•ä¸‹çš„ `README.md` ä¸­è¯´æ˜ã€‚

### åœæ­¢å’Œåˆ é™¤æœåŠ¡

*   **åœæ­¢æœåŠ¡** (ä¿ç•™å®¹å™¨ä½†åœæ­¢è¿è¡Œ):
    åœ¨æœåŠ¡ç›®å½•ä¸­è¿è¡Œï¼š
    ```bash
    docker compose stop
    ```
*   **åœæ­¢æœåŠ¡å¹¶ç§»é™¤å®¹å™¨** (ä¿ç•™æ•°æ®å·):
    åœ¨æœåŠ¡ç›®å½•ä¸­è¿è¡Œï¼š
    ```bash
    docker compose down
    ```
*   **åœæ­¢æœåŠ¡å¹¶ç§»é™¤å®¹å™¨åŠæ•°æ®å·** (ä¼šä¸¢å¤±æ•°æ®ï¼Œè¯·è°¨æ…ä½¿ç”¨!):
    åœ¨æœåŠ¡ç›®å½•ä¸­è¿è¡Œï¼š
    ```bash
    docker compose down -v
    ```

## é¡¹ç›®ç»“æ„

é¡¹ç›®æ ¹ç›®å½• `docker-stack` ä¸‹åŒ…å«äº†å„ä¸ªæœåŠ¡çš„ç‹¬ç«‹å­ç›®å½•ã€‚æ¯ä¸ªæœåŠ¡ç›®å½•çš„å‘½åé€šå¸¸å¯¹åº”äºæœåŠ¡çš„åç§°ã€‚

æ¯ä¸ªæœåŠ¡å­ç›®å½•ä¸‹é€šå¸¸åŒ…å«ä»¥ä¸‹å…³é”®æ–‡ä»¶ï¼š

*   `docker-compose.yaml`: å®šä¹‰äº†æœåŠ¡çš„å®¹å™¨ã€ç½‘ç»œã€å·ç­‰é…ç½®ã€‚
*   `.env.example`: å­˜å‚¨äº†æœåŠ¡å¯èƒ½éœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œå¦‚é»˜è®¤ç«¯å£ã€ç”¨æˆ·åã€å¯†ç ã€æ•°æ®å·åç§°ç­‰ã€‚**åœ¨ä½¿ç”¨å‰ï¼Œæ‚¨åº”è¯¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹æ­¤æ–‡ä»¶ã€‚**
*   `README.md` (å¯é€‰): é’ˆå¯¹è¯¥æœåŠ¡çš„å…·ä½“è¯´æ˜ã€é…ç½®ç»†èŠ‚ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹æˆ–è®¿é—®æ–¹å¼ç­‰ã€‚**å¼ºçƒˆå»ºè®®æŸ¥çœ‹è¯¥æ–‡ä»¶ä»¥è·å–æ›´è¯¦ç»†ä¿¡æ¯ã€‚**

```
docker-stack/
â”œâ”€â”€ service-a/         # æœåŠ¡ A ç›®å½•
â”‚   â”œâ”€â”€ .env.example
â”‚   â”œâ”€â”€ docker-compose.yaml
â”‚   â””â”€â”€ README.md (å¯é€‰)
â”œâ”€â”€ service-b/         # æœåŠ¡ B ç›®å½•
â”‚   â”œâ”€â”€ nested-part/   # å¯èƒ½å­˜åœ¨åµŒå¥—ç»“æ„
â”‚   â”‚   â”œâ”€â”€ .env.example
â”‚   â”‚   â””â”€â”€ docker-compose.yaml
â”‚   â”œâ”€â”€ .env.example
â”‚   â””â”€â”€ docker-compose.yaml
â”œâ”€â”€ ...
â””â”€â”€ README.md          # æœ¬æ–‡ä»¶
```

## å¯ç”¨æœåŠ¡åˆ—è¡¨

ä»¥ä¸‹æ˜¯æœ¬é¡¹ç›®å½“å‰åŒ…å«çš„æ‰€æœ‰æœåŠ¡çš„åˆ—è¡¨ï¼ŒæŒ‰ç±»åˆ«ç»„ç»‡ã€‚

### æ•°æ®åº“ & å­˜å‚¨

*   [**Alist**](./alist/): ğŸ“ ä¸€æ¬¾æ”¯æŒå¤šç§å­˜å‚¨çš„æ–‡ä»¶åˆ—è¡¨ç¨‹åºã€‚
*   [**Doris (Standalone)**](./doris/doris-standalone/): ğŸš€ æ–°ä¸€ä»£å®æ—¶æ•°æ®ä»“åº“ã€‚
*   [**Doris (Cluster)**](./doris/doris-cluster/): ğŸš€ Doris é›†ç¾¤éƒ¨ç½²ã€‚
*   [**Elasticsearch (Standalone)**](./es/es-standalone/): ğŸ” åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ã€‚
*   [**Elasticsearch (Cluster)**](./es/es-cluster/): ğŸ” Elasticsearch é›†ç¾¤éƒ¨ç½²ã€‚
*   [**MongoDB (Standalone)**](./mongodb/mongodb-standalone/): ğŸƒ é¢å‘æ–‡æ¡£çš„ NoSQL æ•°æ®åº“ã€‚
*   [**MySQL (Standalone)**](./mysql/mysql-standalone/): ğŸ¬ æœ€æµè¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“ã€‚
*   [**MySQL (Replication)**](./mysql/mysql-replication/): ğŸ¬ MySQL ä¸»ä»å¤åˆ¶éƒ¨ç½²ã€‚
*   [**PostgreSQL (Standalone)**](./postgresql/postgresql-standalone/): ğŸ˜ åŠŸèƒ½å¼ºå¤§çš„å¼€æºå¯¹è±¡å…³ç³»æ•°æ®åº“ã€‚
*   [**Redis (Standalone)**](./redis/redis-standalone/): âš¡ é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®ç»“æ„å­˜å‚¨ã€‚
*   [**Redis (Cluster)**](./redis/redis-cluster/): âš¡ Redis é›†ç¾¤éƒ¨ç½²ã€‚
*   [**Redis Insight**](./redis/redis-insight/):  GUI for Redis.

### æ¶ˆæ¯é˜Ÿåˆ—

*   [**Kafka (Standalone)**](./kafka/kafka-standalone/): ğŸ“¨ åˆ†å¸ƒå¼æµå¤„ç†å¹³å°ã€‚
*   [**Kafka (Cluster)**](./kafka/kafka-cluster/): ğŸ“¨ Kafka é›†ç¾¤éƒ¨ç½²ã€‚

### ç›‘æ§ & æŒ‡æ ‡

*   [**Metrics (Prometheus + Grafana)**](./metrics/): ğŸ“Š ä¸€å¥—å®Œæ•´çš„ç›‘æ§è§£å†³æ–¹æ¡ˆ (Prometheus + Grafana)ã€‚
*   [**Node Exporter**](./exporter/node-exporter/): ç¡¬ä»¶å’Œæ“ä½œç³»ç»ŸæŒ‡æ ‡å¯¼å‡ºå™¨ã€‚
*   [**ES Exporter**](./exporter/es-exporter/): Elasticsearch æŒ‡æ ‡å¯¼å‡ºå™¨ã€‚
*   [**Kafka Exporter**](./exporter/kafka-exporter/): Kafka æŒ‡æ ‡å¯¼å‡ºå™¨ã€‚
*   [**Redis Exporter**](./exporter/redis-exporter/): Redis æŒ‡æ ‡å¯¼å‡ºå™¨ã€‚

### å¼€å‘ & CI/CD

*   [**Bitwarden**](./bitwarden/): ğŸ”’ å¼€æºçš„å¯†ç ç®¡ç†å™¨ã€‚
*   [**Code-Server**](./code-server/): â˜ï¸ åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ VS Codeã€‚
*   [**Dockge**](./dockge/): ä¸€ä¸ªèŠ±å“¨çš„ã€æ˜“äºä½¿ç”¨çš„å’Œå“åº”å¼çš„è‡ªæ‰˜ç®¡ docker compose.yaml ç®¡ç†å™¨ã€‚
*   [**GitLab**](./gitlab/): ğŸ¦Š ä¸€ä½“åŒ–çš„ DevOps å¹³å°ã€‚
*   [**Harbor**](./harbor/): ğŸ³ ä¼ä¸šçº§çš„ Docker Registryã€‚
*   [**Jenkins**](./jenkins/): ğŸ¤– æµè¡Œçš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ã€‚
*   [**Nexus3**](./nexus3/): ğŸ“¦ ç»„ä»¶ä»“åº“ç®¡ç†å™¨ã€‚
*   [**Portainer**](./portainer/): ğŸ³ è½»é‡çº§çš„ Docker ç®¡ç† UIã€‚
*   [**SonarQube**](./sonarqube/): SonarQube æ˜¯ä¸€ä¸ªç”¨äºä»£ç è´¨é‡ç®¡ç†çš„å¼€æ”¾å¹³å°ã€‚
*   [**XXL-Job Admin**](./xxl-job-admin/): åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦å¹³å°XXL-JOBçš„è°ƒåº¦ä¸­å¿ƒã€‚

### Web åº”ç”¨ & æœåŠ¡

*   [**Certimate**](./certimate/): ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è¯ä¹¦é¢å‘æœºå™¨äººã€‚
*   [**DDNS-Go**](./ddns-go/): è‡ªåŠ¨è·å¾—ä½ çš„å…¬ç½‘ IPv4 æˆ– IPv6 åœ°å€ï¼Œå¹¶è§£æåˆ°å¯¹åº”çš„åŸŸåæœåŠ¡ã€‚
*   [**Draw.io**](./drawio/): ğŸ“ˆ åœ¨çº¿çš„å›¾è¡¨ç»˜åˆ¶å·¥å…·ã€‚
*   [**Librespeed**](./librespeed/): ğŸš€ è½»é‡çº§çš„ç½‘ç»œæµ‹é€Ÿå·¥å…·ã€‚
*   [**Lobe-Chat**](./lobe-chat/): ğŸ¤– å¼€æºçš„ã€å¯æ‰©å±•çš„ï¼ˆFunction Callï¼‰é«˜æ€§èƒ½èŠå¤©æœºå™¨äººæ¡†æ¶ã€‚
*   [**Memos**](./memos/): âœï¸ ä¸€ä¸ªè½»é‡çº§çš„ã€è‡ªæ‰˜ç®¡çš„å¤‡å¿˜å½•ä¸­å¿ƒã€‚
*   [**Metersphere**](./metersphere/): ä¸€ç«™å¼å¼€æºæŒç»­æµ‹è¯•å¹³å°ã€‚
*   [**Moments**](./moments/): ä¸€ä¸ªæ”¯æŒè¯„è®ºã€ç‚¹èµã€åˆ†äº«ã€ç›¸å†Œã€æ—¥è®°ã€åŠ¨æ€ã€å¥½å‹ã€è®¢é˜…ã€æ¶ˆæ¯ç­‰åŠŸèƒ½çš„ç¤¾äº¤ç³»ç»Ÿã€‚
*   [**Next-Chat**](./next-chat/): ä¸€é”®å…è´¹éƒ¨ç½²ä½ çš„ç§äºº ChatGPT ç½‘é¡µåº”ç”¨ã€‚
*   [**Nginx**](./nginx/): ğŸŒ é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ã€‚
*   [**Open-Web-Ui**](./open-web-ui/): ChatGPT é£æ ¼çš„ WebUIã€‚
*   [**Openlist**](./openlist/): ä¸€ä¸ªåŸºäºç½‘é¡µçš„ä¸ªäººå¾…åŠäº‹é¡¹å’Œç¬”è®°åº”ç”¨ç¨‹åºã€‚
*   [**Qing-Long**](./qing-long/): å®šæ—¶ä»»åŠ¡ç®¡ç†é¢æ¿ã€‚
*   [**Showdoc**](./showdoc/): ğŸ“– ä¸€ä¸ªéå¸¸é€‚åˆITå›¢é˜Ÿçš„åœ¨çº¿APIæ–‡æ¡£ã€æŠ€æœ¯æ–‡æ¡£å·¥å…·ã€‚
*   [**WG-Easy**](./wg-easy/):  WireGuard çš„ç®€æ˜“ç®¡ç†ç•Œé¢ã€‚